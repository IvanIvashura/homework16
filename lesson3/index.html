<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Задача 2</title>
</head>

<body>
    <script>
        // Задача 3. Об’єкт “Фірма” (використати члени-класи)

        // назва фірми;
        // дата заснування (рік, місяць);
        // послуги (назва послуги, вартість, термін виконання);
        // адреси філіалів (країна, місто, вулиця, номер будинку);

        // визначення кількості років існування фірми;
        // виведення всіх філіалів фірми у вказаному місті;
        // виведення на екран послуг, що можуть бути виконані за вказану суму грошей та вказаний термін часу;


        class Company {
            constructor() {
                this.name = 'Корсент'
                this.established = {
                    year: 2021,
                    month: 11
                }
                this.services = [
                    {
                        name: 'cleaningHouse',
                        price: 1000,
                        time: 30
                    },
                    {
                        name: 'cleaningCar',
                        price: 3500,
                        time: 45
                    },
                    {
                        name: 'cleaningRoom',
                        price: 400,
                        time: 15
                    }
                ];
                this.adressFilials = [
                    {
                        country: 'Ukraine',
                        city: 'Київ',
                        street: 'Богдана Кошевика',
                        build: 12,
                    },
                    {
                        country: 'USA',
                        city: 'Маямі',
                        street: 'Бідона',
                        build: 15
                    },
                    {
                        country: 'Germany',
                        city: 'Берлін',
                        street: 'Адольфа проспект',
                        build: 17
                    }
                ];
            }

            //  methods 

            getCurrentYear() {
                let establishedYear = this.established.year
                let currentYear = 2023
                return currentYear - establishedYear
            }

            getFilials(userCountry) {
                return this.adressFilials.reduce((prevArr, el) => {
                    if (el.country == userCountry) {
                        prevArr.push(el)
                    }
                    return prevArr
                }, [])
            }

            getServicesAndPrices(userMoney, userTime) {
                return this.services.reduce((prevArr, el) => {
                    if (el.price <= userMoney && el.time <= userTime) {
                        prevArr.push(el.name)
                    }
                    return prevArr
                }, [])
            }


            toString() {
                let userCountry = prompt('Введіть країну з списку: Ukraine, Germany, USA');
                let userMoney = prompt('Введіть кількість грошей');
                let userTime = prompt('Введіть час за який потрібно виконати');

                let filials = this.getFilials(userCountry);
                let availableService = this.getServicesAndPrices(userMoney, userTime)
                console.log(filials)
                console.log(availableService)

                return `кількість років ${this.getCurrentYear()}`;
            }
        }

        let getCompany = new Company()
        document.write(getCompany);



    </script>
</body>

</html>